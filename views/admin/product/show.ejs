<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="Hỏi Dân IT - Dự án laptopshop" />
    <meta name="author" content="Hỏi Dân IT" />
    <title>Products - Hỏi Dân IT</title>
    <link href="/admin/css/styles.css" rel="stylesheet" />
    <script
      src="https://use.fontawesome.com/releases/v6.3.0/js/all.js"
      crossorigin="anonymous"
    ></script>
  </head>
<%- include('../layout/header'); -%>
  
    <div id="layoutSidenav">
      <%- include('../layout/sidenav'); -%>
      <div id="layoutSidenav_content">
        <main>
          <div class="container-fluid px-4">
          <h1 class="mt-4">Manage Products</h1>
          <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item"><a href="/admin">Dashboard</a></li>
            <li class="breadcrumb-item active">Products</li>
          </ol>
        <div>
          <div style="display: flex;justify-content: space-between;align-items: center;" >
        <h5>Table product:</h5>
        <div>
          <a href="/admin/create-product" class="btn btn-warning">Create a new product</a>
        </div>
      </div>
      <hr />
          <table class="table table-hover table-bordered">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Price</th>
              <th>Quantity</th>
              <th>Sold</th>
              <th>Factory</th>
              <th>Target</th>
              <th>Image</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <% if (products && products.length > 0) { %>
              <% products.forEach(function (product) { %>
                <tr>
                  <td><%= product.id %></td>
                  <td><%= product.name %></td>
                  <td><%= product.price.toLocaleString('vi-VN') %> đ</td>
                  <td><%= product.quantity %></td>
                  <td><%= product.sold %></td>
                  <td><%= product.factory %></td>
                  <td><%= product.target %></td>
                  <td>
                    <% if (product.image) { %>
                      <img src="/images/product/<%= product.image %>" alt="<%= product.name %>" 
                           style="max-width: 50px; max-height: 50px;" />
                    <% } else { %>
                      <span class="text-muted">No image</span>
                    <% } %>
                  </td>
                  <td>
                    <a href="/admin/view-product/<%= product.id %>" class="btn btn-sm btn-info" title="View">
                      View
                    </a>
                    <a href="/admin/edit-product/<%= product.id %>" class="btn btn-sm btn-warning" title="Edit">
                      Edit
                    </a>
                    <form method="post" action="/admin/delete-product/<%= product.id %>" style="display: inline;">
                      <button type="submit" class="btn btn-sm btn-danger" title="Delete"
                              onclick="return confirm('Are you sure?')">
                        Delete
                      </button>
                    </form>
                  </td>
                </tr>
              <% }); %>
            <% } else { %>
              <tr>
                <td colspan="9" class="text-center text-muted">No products found</td>
              </tr>
            <% } %>
          </tbody>
        </table>
        </div>
    </div>

        </main>
      <%- include('../layout/footer'); -%>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="/admin/js/scripts.js"></script>
  </body>
</html>
